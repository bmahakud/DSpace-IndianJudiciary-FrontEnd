(self.webpackChunkdspace_angular=self.webpackChunkdspace_angular||[]).push([[870,9380],{69380:(L,F,i)=>{"use strict";i.r(F),i.d(F,{NotifyRequestsStatusDataService:()=>I});var p=i(96354),e=i(96697),u=i(72734),_=i(41684),E=i(4910),f=i(63897),V=i(43052),T=i(32473),A=i(54438);let I=(()=>{class y extends f.W{constructor(j,c,R,D){super("notifyrequests",j,c,R,D),this.requestService=j,this.rdbService=c,this.objectCache=R,this.halService=D}getNotifyRequestsStatus(j){const c=this.getEndpoint().pipe((0,p.T)(R=>R+"/"+j));return c.pipe((0,e.s)(1)).subscribe(R=>{const D=new V.IP(this.requestService.generateRequestId(),R);this.requestService.send(D,!0)}),this.rdbService.buildFromHref(c)}static{this.\u0275fac=function(c){return new(c||y)(A.KVO(T.B),A.KVO(u.o),A.KVO(_.$),A.KVO(E.Y))}}static{this.\u0275prov=A.jDH({token:y,factory:y.\u0275fac,providedIn:"root"})}}return y})()},15927:(L,F,i)=>{"use strict";i.d(F,{z:()=>V});var p=i(7673),e=i(99437),u=i(96354),_=i(82640),E=i(53778),f=i(54438);let V=(()=>{class T{constructor(I,y){this.appConfig=I,this.restService=y}getLinks(I){return this.restService.get(`${this.appConfig.rest.baseUrl}/signposting/links/${I}`).pipe((0,e.W)(G=>(0,p.of)([])),(0,u.T)(G=>200===G.statusCode?G.payload:[]))}static{this.\u0275fac=function(y){return new(y||T)(f.KVO(_.vQ),f.KVO(E.Y))}}static{this.\u0275prov=f.jDH({token:T,factory:T.\u0275fac,providedIn:"root"})}}return T})()},97042:(L,F,i)=>{"use strict";i.r(F),i.d(F,{ItemAlertsComponent:()=>H});var p=i(60177),e=i(7901),u=i(41780),_=i(96354),E=i(84572),f=i(80183),V=i(65007),T=i(3970),I=(i(88318),i(75447)),y=i(16292),G=i(47978),j=i(71306),c=i(54438);function R(O,k){if(1&O&&(c.j41(0,"div",2),c.nrm(1,"ds-alert",3),c.nI1(2,"translate"),c.k0s()),2&O){const n=c.XpG();c.R7$(),c.Y8G("type",n.AlertTypeEnum.Warning)("content",c.bMT(2,2,"item.alerts.private"))}}function D(O,k){if(1&O){const n=c.RV6();c.j41(0,"a",11),c.bIt("click",function(){c.eBV(n);const U=c.XpG(2);return c.Njj(U.openReinstateModal())}),c.EFF(1),c.nI1(2,"translate"),c.k0s()}2&O&&(c.R7$(),c.JRh(c.bMT(2,1,"item.alerts.reinstate-request")))}function Y(O,k){if(1&O&&(c.j41(0,"div",4)(1,"ds-alert",5)(2,"div",6)(3,"span",7),c.EFF(4),c.nI1(5,"translate"),c.k0s(),c.j41(6,"div",8)(7,"a",9),c.EFF(8),c.nI1(9,"translate"),c.k0s(),c.DNE(10,D,3,3,"a",10),c.nI1(11,"async"),c.k0s()()()()),2&O){const n=c.XpG();c.R7$(),c.Y8G("type",n.AlertTypeEnum.Warning),c.R7$(3),c.JRh(c.bMT(5,4,"item.alerts.withdrawn")),c.R7$(4),c.JRh(c.bMT(9,6,"404.link.home-page")),c.R7$(2),c.Y8G("ngIf",c.bMT(11,8,n.showReinstateButton$))}}let H=(()=>{class O{constructor(n,P,U){this.authService=n,this.dsoWithdrawnReinstateModalService=P,this.correctionTypeDataService=U,this.AlertTypeEnum=G.v}ngOnChanges(n){n.item?.currentValue.withdrawn&&this.showReinstateButton$&&(this.showReinstateButton$=this.shouldShowReinstateButton())}shouldShowReinstateButton(){const n=this.correctionTypeDataService.findByItem(this.item.uuid,!0).pipe((0,f.qD)(),(0,_.T)(U=>U.hasSucceeded?U.payload.page:[])),P=this.authService.isAuthorized(T._.AdministratorOf);return(0,E.z)([P,n]).pipe((0,_.T)(([U,et])=>!U&&et.some(q=>q.topic===j.el)))}openReinstateModal(){this.dsoWithdrawnReinstateModalService.openCreateWithdrawnReinstateModal(this.item,"request-reinstate",this.item.isArchived)}static{this.\u0275fac=function(P){return new(P||O)(c.rXU(V.AuthorizationDataService),c.rXU(j.Ee),c.rXU(I.CorrectionTypeDataService))}}static{this.\u0275cmp=c.VBU({type:O,selectors:[["ds-base-item-alerts"]],inputs:{item:"item"},standalone:!0,features:[c.OA$,c.aNF],decls:3,vars:2,consts:[["class","private-warning",4,"ngIf"],["class","withdrawn-warning",4,"ngIf"],[1,"private-warning"],[3,"type","content"],[1,"withdrawn-warning"],[3,"type"],[1,"d-flex","justify-content-between","flex-wrap"],[1,"align-self-center"],[1,"gap-2","d-flex"],["routerLink","/home",1,"btn","btn-primary","btn-sm"],["class","btn btn-primary btn-sm",3,"click",4,"ngIf"],[1,"btn","btn-primary","btn-sm",3,"click"]],template:function(P,U){1&P&&(c.j41(0,"div"),c.DNE(1,R,3,4,"div",0)(2,Y,12,10,"div",1),c.k0s()),2&P&&(c.R7$(),c.Y8G("ngIf",U.item&&!U.item.isDiscoverable),c.R7$(),c.Y8G("ngIf",U.item&&U.item.isWithdrawn))},dependencies:[y.C,p.bT,u.h,u.D9,e.Wk,p.Jj]})}}return O})()},9130:(L,F,i)=>{"use strict";i.d(F,{R:()=>V}),i(88318);var e=i(8886),_=(i(97042),i(54438));const E=["*"];function f(T,A){}let V=(()=>{class T extends e.J{constructor(){super(...arguments),this.inAndOutputNames=["item"]}getComponentName(){return"ItemAlertsComponent"}importThemedComponent(I){return i(42176)(`./${I}/app/item-page/alerts/item-alerts.component`)}importUnthemedComponent(){return Promise.resolve().then(i.bind(i,97042))}static{this.\u0275fac=(()=>{let I;return function(G){return(I||(I=_.xGo(T)))(G||T)}})()}static{this.\u0275cmp=_.VBU({type:T,selectors:[["ds-item-alerts"]],inputs:{item:"item"},standalone:!0,features:[_.Vt3,_.aNF],ngContentSelectors:E,decls:5,vars:0,consts:[["vcr",""],["content",""]],template:function(y,G){1&y&&(_.NAR(),_.DNE(0,f,0,0,"ng-template",null,0,_.C5r),_.j41(2,"div",null,1),_.SdG(4),_.k0s())},encapsulation:2})}}return T})()},14826:(L,F,i)=>{"use strict";i.r(F),i.d(F,{FullFileSectionComponent:()=>nt});var p=i(60177),e=i(41780),u=i(25558),_=i(88141),E=i(82640),f=i(96526),V=i(42578),T=i(22978),I=(i(88318),i(82777)),y=i(28836),G=i(79222),j=i(39806),c=i(5682),R=i(23401),D=i(43525),Y=i(67600),H=i(18226),O=i(97402),k=i(1231),n=i(54438),P=i(7901);function U(M,W){if(1&M&&(n.qex(0),n.j41(1,"dt",12),n.EFF(2),n.nI1(3,"translate"),n.k0s(),n.j41(4,"dd",13),n.EFF(5),n.k0s(),n.bVm()),2&M){const v=n.XpG().$implicit;n.R7$(2),n.JRh(n.bMT(3,2,"item.page.filesection.description")),n.R7$(3),n.JRh(v.firstMetadataValue("dc.description"))}}function et(M,W){if(1&M&&(n.j41(0,"div",7)(1,"div",8),n.nrm(2,"ds-thumbnail",9),n.nI1(3,"async"),n.k0s(),n.j41(4,"div",10)(5,"dl",11)(6,"dt",12),n.EFF(7),n.nI1(8,"translate"),n.k0s(),n.j41(9,"dd",13),n.EFF(10),n.k0s(),n.j41(11,"dt",12),n.EFF(12),n.nI1(13,"translate"),n.k0s(),n.j41(14,"dd",13),n.EFF(15),n.nI1(16,"dsFileSize"),n.k0s(),n.j41(17,"dt",12),n.EFF(18),n.nI1(19,"translate"),n.k0s(),n.j41(20,"dd",13),n.EFF(21),n.nI1(22,"async"),n.k0s(),n.DNE(23,U,6,4,"ng-container",2),n.k0s()(),n.j41(24,"div",14)(25,"ds-file-download-link",15),n.EFF(26),n.nI1(27,"translate"),n.k0s()()()),2&M){let v,S;const x=W.$implicit,X=n.XpG(4);n.R7$(2),n.Y8G("thumbnail",null==(v=n.bMT(3,11,x.thumbnail))?null:v.payload),n.R7$(5),n.JRh(n.bMT(8,13,"item.page.filesection.name")),n.R7$(3),n.JRh(X.dsoNameService.getName(x)),n.R7$(2),n.JRh(n.bMT(13,15,"item.page.filesection.size")),n.R7$(3),n.JRh(n.bMT(16,17,x.sizeBytes)),n.R7$(3),n.JRh(n.bMT(19,19,"item.page.filesection.format")),n.R7$(3),n.JRh(null==(S=n.bMT(22,21,x.format))||null==S.payload?null:S.payload.description),n.R7$(2),n.Y8G("ngIf",x.hasMetadata("dc.description")),n.R7$(2),n.Y8G("bitstream",x)("item",X.item),n.R7$(),n.SpI(" ",n.bMT(27,23,"item.page.filesection.download")," ")}}function q(M,W){if(1&M&&(n.j41(0,"ds-pagination",5),n.DNE(1,et,28,25,"div",6),n.k0s()),2&M){const v=n.XpG(2).ngVar,S=n.XpG();n.Y8G("hideGear",!0)("hidePagerWhenSinglePage",!0)("paginationOptions",S.originalOptions)("collectionSize",null==v?null:v.totalElements)("retainScrollPosition",!0),n.R7$(),n.Y8G("ngForOf",null==v?null:v.page)}}function t(M,W){if(1&M&&(n.j41(0,"div")(1,"h3",3),n.EFF(2),n.nI1(3,"translate"),n.k0s(),n.DNE(4,q,2,6,"ds-pagination",4),n.k0s()),2&M){const v=n.XpG().ngVar;n.R7$(2),n.JRh(n.bMT(3,2,"item.page.filesection.original.bundle")),n.R7$(2),n.Y8G("ngIf",(null==v||null==v.page?null:v.page.length)>0)}}function w(M,W){if(1&M&&(n.j41(0,"div"),n.DNE(1,t,5,4,"div",2),n.k0s()),2&M){const v=W.ngVar,S=n.XpG();n.R7$(),n.Y8G("ngIf",S.hasValuesInBundle(v))}}function z(M,W){if(1&M&&(n.j41(0,"div",17)(1,"div",8),n.nrm(2,"ds-thumbnail",9),n.nI1(3,"async"),n.k0s(),n.j41(4,"div",10)(5,"dl",11)(6,"dt",12),n.EFF(7),n.nI1(8,"translate"),n.k0s(),n.j41(9,"dd",13),n.EFF(10),n.k0s(),n.j41(11,"dt",12),n.EFF(12),n.nI1(13,"translate"),n.k0s(),n.j41(14,"dd",13),n.EFF(15),n.nI1(16,"dsFileSize"),n.k0s(),n.j41(17,"dt",12),n.EFF(18),n.nI1(19,"translate"),n.k0s(),n.j41(20,"dd",13),n.EFF(21),n.nI1(22,"async"),n.k0s(),n.j41(23,"dt",12),n.EFF(24),n.nI1(25,"translate"),n.k0s(),n.j41(26,"dd",13),n.EFF(27),n.k0s()()(),n.j41(28,"div",14)(29,"ds-file-download-link",15),n.EFF(30),n.nI1(31,"translate"),n.k0s()()()),2&M){let v,S;const x=W.$implicit,X=n.XpG(4);n.R7$(2),n.Y8G("thumbnail",null==(v=n.bMT(3,12,x.thumbnail))?null:v.payload),n.R7$(5),n.JRh(n.bMT(8,14,"item.page.filesection.name")),n.R7$(3),n.JRh(X.dsoNameService.getName(x)),n.R7$(2),n.JRh(n.bMT(13,16,"item.page.filesection.size")),n.R7$(3),n.JRh(n.bMT(16,18,x.sizeBytes)),n.R7$(3),n.JRh(n.bMT(19,20,"item.page.filesection.format")),n.R7$(3),n.JRh(null==(S=n.bMT(22,22,x.format))||null==S.payload?null:S.payload.description),n.R7$(3),n.JRh(n.bMT(25,24,"item.page.filesection.description")),n.R7$(3),n.JRh(x.firstMetadataValue("dc.description")),n.R7$(2),n.Y8G("bitstream",x)("item",X.item),n.R7$(),n.SpI(" ",n.bMT(31,26,"item.page.filesection.download")," ")}}function ot(M,W){if(1&M&&(n.j41(0,"ds-pagination",5),n.DNE(1,z,32,28,"div",16),n.k0s()),2&M){const v=n.XpG(2).ngVar,S=n.XpG();n.Y8G("hideGear",!0)("hidePagerWhenSinglePage",!0)("paginationOptions",S.licenseOptions)("collectionSize",null==v?null:v.totalElements)("retainScrollPosition",!0),n.R7$(),n.Y8G("ngForOf",null==v?null:v.page)}}function J(M,W){if(1&M&&(n.j41(0,"div")(1,"h3",3),n.EFF(2),n.nI1(3,"translate"),n.k0s(),n.DNE(4,ot,2,6,"ds-pagination",4),n.k0s()),2&M){const v=n.XpG().ngVar;n.R7$(2),n.JRh(n.bMT(3,2,"item.page.filesection.license.bundle")),n.R7$(2),n.Y8G("ngIf",(null==v||null==v.page?null:v.page.length)>0)}}function Q(M,W){if(1&M&&(n.j41(0,"div"),n.DNE(1,J,5,4,"div",2),n.k0s()),2&M){const v=W.ngVar,S=n.XpG();n.R7$(),n.Y8G("ngIf",S.hasValuesInBundle(v))}}let nt=(()=>{class M extends k.FileSectionComponent{constructor(v,S,x,X,Z,it,st){super(v,S,x,Z,it,st),this.notificationsService=S,this.translateService=x,this.paginationService=X,this.dsoNameService=Z,this.appConfig=it,this.router=st,this.originalOptions=Object.assign(new R.W,{id:"obo",currentPage:1,pageSize:this.appConfig.item.bitstream.pageSize}),this.licenseOptions=Object.assign(new R.W,{id:"lbo",currentPage:1,pageSize:this.appConfig.item.bitstream.pageSize})}ngOnInit(){this.initialize()}initialize(){this.originals$=this.paginationService.getCurrentPagination(this.originalOptions.id,this.originalOptions).pipe((0,u.n)(v=>this.bitstreamDataService.findAllByItemAndBundleName(this.item,"ORIGINAL",{elementsPerPage:v.pageSize,currentPage:v.currentPage},!0,!0,(0,Y.s)("format"),(0,Y.s)("thumbnail"))),(0,_.M)(v=>{(0,I.a4)(v.errorMessage)&&this.notificationsService.error(this.translateService.get("file-section.error.header"),`${v.statusCode} ${v.errorMessage}`)})),this.licenses$=this.paginationService.getCurrentPagination(this.licenseOptions.id,this.licenseOptions).pipe((0,u.n)(v=>this.bitstreamDataService.findAllByItemAndBundleName(this.item,"LICENSE",{elementsPerPage:v.pageSize,currentPage:v.currentPage},!0,!0,(0,Y.s)("format"),(0,Y.s)("thumbnail"))),(0,_.M)(v=>{(0,I.a4)(v.errorMessage)&&this.notificationsService.error(this.translateService.get("file-section.error.header"),`${v.statusCode} ${v.errorMessage}`)}))}hasValuesInBundle(v){return(0,I.a4)(v)&&!(0,I.Im)(v.page)}ngOnDestroy(){this.paginationService.clearPagination(this.originalOptions.id),this.paginationService.clearPagination(this.licenseOptions.id)}static{this.\u0275fac=function(S){return new(S||M)(n.rXU(V.BitstreamDataService),n.rXU(j.I),n.rXU(e.c$),n.rXU(T.m),n.rXU(f.f),n.rXU(E.vQ),n.rXU(P.Ix))}}static{this.\u0275cmp=n.VBU({type:M,selectors:[["ds-base-item-page-full-file-section"]],inputs:{item:"item"},standalone:!0,features:[n.Vt3,n.aNF],decls:6,vars:9,consts:[[3,"label"],[4,"ngVar"],[4,"ngIf"],[1,"h5","simple-view-element-header"],[3,"hideGear","hidePagerWhenSinglePage","paginationOptions","collectionSize","retainScrollPosition",4,"ngIf"],[3,"hideGear","hidePagerWhenSinglePage","paginationOptions","collectionSize","retainScrollPosition"],["class","file-section row mb-3",4,"ngFor","ngForOf"],[1,"file-section","row","mb-3"],[1,"col-3"],[3,"thumbnail"],[1,"col-7"],[1,"row"],[1,"col-md-4"],[1,"col-md-8"],[1,"col-2"],[3,"bitstream","item"],["class","file-section row",4,"ngFor","ngForOf"],[1,"file-section","row"]],template:function(S,x){if(1&S&&(n.j41(0,"ds-metadata-field-wrapper",0),n.nI1(1,"translate"),n.DNE(2,w,2,1,"div",1),n.nI1(3,"async"),n.DNE(4,Q,2,1,"div",1),n.nI1(5,"async"),n.k0s()),2&S){let X,Z;n.Y8G("label",n.bMT(1,3,x.label)),n.R7$(2),n.Y8G("ngVar",null==(X=n.bMT(3,5,x.originals$))?null:X.payload),n.R7$(2),n.Y8G("ngVar",null==(Z=n.bMT(5,7,x.licenses$))?null:Z.payload)}},dependencies:[c.e,p.bT,e.h,e.D9,p.Jj,H.r,O.T,p.Sq,y.z,D.s,G.Q],styles:["@media screen and (min-width: 768px){dt[_ngcontent-%COMP%]{text-align:right}}"]})}}return M})()},53996:(L,F,i)=>{"use strict";i.d(F,{n:()=>V}),i(88318);var e=i(8886),_=(i(14826),i(54438));const E=["*"];function f(T,A){}let V=(()=>{class T extends e.J{constructor(){super(...arguments),this.inAndOutputNames=["item"]}getComponentName(){return"FullFileSectionComponent"}importThemedComponent(I){return i(63614)(`./${I}/app/item-page/full/field-components/file-section/full-file-section.component`)}importUnthemedComponent(){return Promise.resolve().then(i.bind(i,14826))}static{this.\u0275fac=(()=>{let I;return function(G){return(I||(I=_.xGo(T)))(G||T)}})()}static{this.\u0275cmp=_.VBU({type:T,selectors:[["ds-item-page-full-file-section"]],inputs:{item:"item"},standalone:!0,features:[_.Vt3,_.aNF],ngContentSelectors:E,decls:5,vars:0,consts:[["vcr",""],["content",""]],template:function(y,G){1&y&&(_.NAR(),_.DNE(0,f,0,0,"ng-template",null,0,_.C5r),_.j41(2,"div",null,1),_.SdG(4),_.k0s())},encapsulation:2})}}return T})()},69002:(L,F,i)=>{"use strict";i.r(F),i.d(F,{FullItemPageComponent:()=>K});var p=i(60177),e=i(54438),u=i(7901),_=i(41780),E=i(96354),f=i(5964),V=i(42084),T=i(65007),A=i(29326),I=i(15927),y=i(7337),G=i(50332),j=i(17807),c=i(82777),R=i(79632),D=i(82394),Y=i(18226),H=i(57850),O=i(9130),k=i(44616),n=i(26077),P=i(84572),U=i(7673),et=i(96697),q=i(25558),t=i(3970),w=i(80183),z=i(78448),ot=i(17191),J=i(90887),Q=i(72976),nt=i(80502),M=i(69380),W=i(21308),v=i(44869),S=function(a){return a.ACCEPTED="ACCEPTED",a.REJECTED="REJECTED",a.REQUESTED="REQUESTED",a}(S||{});const x=a=>({"align-items-center":a}),X=(a,h,s)=>({serviceName:a,serviceUrl:h,offerType:s});function Z(a,h){if(1&a&&(e.qex(0),e.nrm(1,"div",7),e.nI1(2,"translate"),e.bVm()),2&a){const s=h.$implicit,d=e.XpG(2);e.R7$(),e.Y8G("innerHTML",e.i5U(2,1,d.displayOptions.text,e.sMw(4,X,s.serviceName,s.serviceUrl,s.offerType)),e.npT)}}function it(a,h){if(1&a&&(e.qex(0),e.j41(1,"div",1),e.nrm(2,"img",2),e.j41(3,"ds-truncatable",3)(4,"ds-truncatable-part",4)(5,"div",5),e.DNE(6,Z,3,8,"ng-container",6),e.k0s()()()(),e.bVm()),2&a){const s=e.XpG();e.R7$(),e.ZvI("alert d-flex flex-row sections-gap ",s.displayOptions.alertType,""),e.Y8G("ngClass",e.eq3(8,x,1===s.data.length)),e.R7$(2),e.Y8G("id",s.status),e.R7$(),e.Y8G("id",s.status)("minLines",1),e.R7$(2),e.Y8G("ngForOf",s.data)}}let st=(()=>{class a{constructor(){this.data=[]}ngOnInit(){this.prepareDataToDisplay()}prepareDataToDisplay(){switch(this.status){case S.ACCEPTED:this.displayOptions={alertType:"alert-info",text:"request-status-alert-box.accepted"};break;case S.REJECTED:this.displayOptions={alertType:"alert-danger",text:"request-status-alert-box.rejected"};break;case S.REQUESTED:this.displayOptions={alertType:"alert-warning",text:"request-status-alert-box.requested"}}}static{this.\u0275fac=function(d){return new(d||a)}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["ds-request-status-alert-box"]],inputs:{status:"status",data:"data"},standalone:!0,features:[e.aNF],decls:1,vars:1,consts:[[4,"ngIf"],[3,"ngClass"],["src","assets/images/qa-coar-notify-logo.png","alt","notify logo",1,"source-logo"],[3,"id"],[3,"id","minLines"],[1,"w-100","d-flex","flex-column"],[4,"ngFor","ngForOf"],[3,"innerHTML"]],template:function(d,C){1&d&&e.DNE(0,it,7,10,"ng-container",0),2&d&&e.Y8G("ngIf",(null==C.data?null:C.data.length)>0&&C.displayOptions)},dependencies:[p.bT,v.W,W.d,p.Sq,_.h,_.D9,p.YU],styles:[".source-logo[_ngcontent-%COMP%]{max-height:var(--ds-header-logo-height)}.sections-gap[_ngcontent-%COMP%]{gap:1rem}"],changeDetection:0})}}return a})();function mt(a,h){if(1&a&&(e.qex(0),e.nrm(1,"ds-request-status-alert-box",2),e.bVm()),2&a){const s=h.$implicit;e.R7$(),e.Y8G("status",s.key)("data",s.value)}}function _t(a,h){if(1&a&&(e.qex(0),e.DNE(1,mt,2,2,"ng-container",1),e.nI1(2,"async"),e.nI1(3,"keyvalue"),e.bVm()),2&a){const s=e.XpG();e.R7$(),e.Y8G("ngForOf",e.bMT(3,3,e.bMT(2,1,s.requestMap$)))}}let pt=(()=>{class a{constructor(s){this.notifyInfoService=s}ngOnInit(){this.requestMap$=this.notifyInfoService.getNotifyRequestsStatus(this.itemUuid).pipe((0,w.qD)(),(0,f.p)(s=>(0,c.a4)(s)),(0,w.Bo)(),(0,f.p)(s=>(0,c.a4)(s)),(0,E.T)(s=>this.groupDataByStatus(s)))}groupDataByStatus(s){const d=new Map;return s.notifyStatus?.forEach(C=>{const B=C.status;d.has(B)||d.set(B,[]),d.get(B)?.push(C)}),d}static{this.\u0275fac=function(d){return new(d||a)(e.rXU(M.NotifyRequestsStatusDataService))}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["ds-notify-requests-status"]],inputs:{itemUuid:"itemUuid"},standalone:!0,features:[e.aNF],decls:2,vars:3,consts:[[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"status","data"]],template:function(d,C){if(1&d&&(e.DNE(0,_t,4,5,"ng-container",0),e.nI1(1,"async")),2&d){let B;e.Y8G("ngIf",(null==(B=e.bMT(1,1,C.requestMap$))?null:B.size)>0)}},dependencies:[st,p.Jj,p.lG,p.Sq,p.bT],changeDetection:0})}}return a})();var vt=i(99437),ut=i(47483),gt=i(53954),at=i(61723);i(88318);let ft=(()=>{class a{transform(s,d){return s.split(d)}static{this.\u0275fac=function(d){return new(d||a)}}static{this.\u0275pipe=e.EJ8({name:"dsSplit",type:a,pure:!0,standalone:!0})}}return a})();const ht=a=>({num:a}),It=(a,h,s)=>[a,h,"target",s],Et=()=>({forward:!0});function yt(a,h){if(1&a&&(e.j41(0,"div",3)(1,"div",4),e.nrm(2,"img",5),e.nI1(3,"dsSplit"),e.k0s(),e.j41(4,"div",6)(5,"div",7),e.EFF(6),e.nI1(7,"translate"),e.k0s(),e.j41(8,"button",8),e.nI1(9,"dsSplit"),e.EFF(10),e.nI1(11,"translate"),e.k0s()()()),2&a){const s=e.XpG().$implicit,d=e.XpG(2);e.R7$(2),e.Mz_("src","assets/images/qa-",e.i5U(3,8,s.id,":")[0],"-logo.png",e.B4B),e.Mz_("alt","",s.id," logo"),e.R7$(4),e.SpI(" ",e.i5U(7,11,"item.qa-event-notification.check.notification-info",e.eq3(19,ht,s.totalEvents))," "),e.R7$(2),e.Y8G("routerLink",e.sMw(21,It,d.getQualityAssuranceRoute(),e.i5U(9,14,s.id,":")[0],d.item.id))("queryParams",e.lJ4(25,Et)),e.R7$(2),e.SpI(" ",e.bMT(11,17,"item.qa-event-notification-info.check.button")," ")}}function Tt(a,h){if(1&a&&(e.qex(0),e.DNE(1,yt,12,26,"div",2),e.bVm()),2&a){const s=h.$implicit;e.R7$(),e.Y8G("ngIf",s.totalEvents>0)}}function Dt(a,h){if(1&a&&(e.qex(0),e.DNE(1,Tt,2,1,"ng-container",1),e.bVm()),2&a){const s=h.ngIf;e.R7$(),e.Y8G("ngForOf",s)}}let Mt=(()=>{class a{constructor(s){this.qualityAssuranceSourceDataService=s}ngOnChanges(s){s.item&&s.item.currentValue.uuid!==s.item.previousValue?.uuid&&(this.sources$=this.getQualityAssuranceSources$())}getQualityAssuranceSources$(){const s={searchParams:[new gt.x("target",this.item.uuid)]};return this.qualityAssuranceSourceDataService.getSourcesByTarget(s,!1).pipe((0,w.qD)(),(0,E.T)(d=>d.hasSucceeded?d.payload.page:[]),(0,vt.W)(()=>[]))}getQualityAssuranceRoute(){return(0,ut.b7)()}static{this.\u0275fac=function(d){return new(d||a)(e.rXU(at.QualityAssuranceSourceDataService))}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["ds-qa-event-notification"]],inputs:{item:"item"},standalone:!0,features:[e.Jv_([at.QualityAssuranceSourceDataService]),e.OA$,e.aNF],decls:2,vars:3,consts:[[4,"ngIf"],[4,"ngFor","ngForOf"],["class","alert alert-info d-flex flex-row",4,"ngIf"],[1,"alert","alert-info","d-flex","flex-row"],[1,"source-logo-container"],["onerror","this.src='assets/images/dspace-logo.svg'",1,"source-logo",3,"src","alt"],[1,"w-100","d-flex","justify-content-between"],[1,"ps-4","align-self-center"],[1,"btn","btn-primary","align-self-center",3,"routerLink","queryParams"]],template:function(d,C){1&d&&(e.DNE(0,Dt,2,1,"ng-container",0),e.nI1(1,"async")),2&d&&e.Y8G("ngIf",e.bMT(1,1,C.sources$))},dependencies:[p.bT,p.Sq,p.Jj,u.Wk,_.h,_.D9,ft],styles:[".source-logo[_ngcontent-%COMP%]{max-height:var(--ds-header-logo-height)}.source-logo-container[_ngcontent-%COMP%]{width:var(--ds-qa-logo-width);display:flex;justify-content:center}.sections-gap[_ngcontent-%COMP%]{gap:1rem}"],changeDetection:0})}}return a})();var rt=i(8865);function Rt(a,h){if(1&a&&e.nrm(0,"ds-listable-object-component-loader",11),2&a){const s=e.XpG().ngIf,d=e.XpG(3);e.Y8G("object",s)("viewMode",d.viewMode)}}function Ct(a,h){if(1&a&&(e.j41(0,"div"),e.nrm(1,"ds-item-alerts",6)(2,"ds-qa-event-notification",6)(3,"ds-notify-requests-status",7)(4,"ds-item-versions-notice",6)(5,"ds-view-tracker",8),e.DNE(6,Rt,1,2,"ds-listable-object-component-loader",9),e.nI1(7,"async"),e.nrm(8,"ds-item-versions",10),e.k0s()),2&a){const s=h.ngIf,d=e.XpG(3);e.R7$(),e.Y8G("item",s),e.R7$(),e.Y8G("item",s),e.R7$(),e.Y8G("itemUuid",s.uuid),e.R7$(),e.Y8G("item",s),e.R7$(),e.Y8G("object",s),e.R7$(),e.Y8G("ngIf",!s.isWithdrawn||e.bMT(7,8,d.isAdmin$)),e.R7$(2),e.Y8G("item",s)("displayActions",!1)}}function Ot(a,h){if(1&a&&(e.j41(0,"div",4),e.DNE(1,Ct,9,10,"div",5),e.k0s()),2&a){const s=e.XpG().ngVar;e.Y8G("@fadeInOut",void 0),e.R7$(),e.Y8G("ngIf",null==s?null:s.payload)}}function St(a,h){1&a&&(e.nrm(0,"ds-error",12),e.nI1(1,"translate")),2&a&&e.FS9("message",e.bMT(1,1,"error.item"))}function bt(a,h){1&a&&(e.nrm(0,"ds-loading",12),e.nI1(1,"translate")),2&a&&e.FS9("message",e.bMT(1,1,"loading.item"))}function Pt(a,h){if(1&a&&(e.j41(0,"div",1),e.DNE(1,Ot,2,2,"div",2)(2,St,2,3,"ds-error",3)(3,bt,2,3,"ds-loading",3),e.k0s()),2&a){const s=h.ngVar;e.R7$(),e.Y8G("ngIf",null==s?null:s.hasSucceeded),e.R7$(),e.Y8G("ngIf",null==s?null:s.hasFailed),e.R7$(),e.Y8G("ngIf",null==s?null:s.isLoading)}}let $t=(()=>{class a{constructor(s,d,C,B,N,tt,lt,ct,dt){this.route=s,this.router=d,this.items=C,this.authorizationService=B,this.responseService=N,this.signpostingDataService=tt,this.linkHeadService=lt,this.notifyInfoService=ct,this.platformId=dt,this.viewMode=z.n.StandalonePage,this.signpostingLinks=[],this.inboxTags=[],this.coarRestApiUrls=[],this.initPageLinks()}ngOnInit(){this.itemRD$=this.route.data.pipe((0,E.T)(s=>s.dso)),this.itemPageRoute$=this.itemRD$.pipe((0,w.Hz)(),(0,E.T)(s=>(0,J._o)(s))),this.isAdmin$=this.authorizationService.isAuthorized(t._.AdministratorOf)}initPageLinks(){this.route.params.subscribe(s=>{(0,P.z)([this.signpostingDataService.getLinks(s.id).pipe((0,et.s)(1)),this.getCoarLdnLocalInboxUrls()]).subscribe(([d,C])=>{let B="";if(this.signpostingLinks=d,d.forEach(N=>{B=B+((0,c.hj)(B)?", ":"")+`<${N.href}> ; rel="${N.rel}"`+((0,c.hj)(N.type)?` ; type="${N.type}" `:" ");let tt={href:N.href,rel:N.rel};(0,c.hj)(N.type)&&(tt=Object.assign(tt,{type:N.type})),this.linkHeadService.addTag(tt)}),C.length>0){const N=this.initPageInboxLinks(C);B=B+((0,c.hj)(B)?", ":"")+N}(0,p.Vy)(this.platformId)&&this.responseService.setHeader("Link",B)})})}getCoarLdnLocalInboxUrls(){return this.notifyInfoService.isCoarConfigEnabled().pipe((0,q.n)(s=>s?this.notifyInfoService.getCoarLdnLocalInboxUrls():(0,U.of)([])))}initPageInboxLinks(s){const d=this.notifyInfoService.getInboxRelationLink();let C="";return s.forEach(B=>{const N={href:B,rel:d};this.inboxTags.push(N),this.linkHeadService.addTag(N),C=C+((0,c.hj)(C)?", ":"")+`<${B}> ; rel="${d}"`}),C}ngOnDestroy(){this.signpostingLinks.forEach(s=>{this.linkHeadService.removeTag(`href='${s.href}'`)}),this.inboxTags.forEach(s=>{this.linkHeadService.removeTag(`href='${s.href}'`)})}static{this.\u0275fac=function(d){return new(d||a)(e.rXU(u.nX),e.rXU(u.Ix),e.rXU(A.ItemDataService),e.rXU(T.AuthorizationDataService),e.rXU(y.w),e.rXU(I.z),e.rXU(rt.m),e.rXU(V.P),e.rXU(e.Agw))}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["ds-base-item-page"]],standalone:!0,features:[e.aNF],decls:2,vars:3,consts:[["class","container",4,"ngVar"],[1,"container"],["class","item-page",4,"ngIf"],[3,"message",4,"ngIf"],[1,"item-page"],[4,"ngIf"],[3,"item"],[3,"itemUuid"],[3,"object"],[3,"object","viewMode",4,"ngIf"],[1,"mt-2",3,"item","displayActions"],[3,"object","viewMode"],[3,"message"]],template:function(d,C){1&d&&(e.DNE(0,Pt,4,3,"div",0),e.nI1(1,"async")),2&d&&e.Y8G("ngVar",e.bMT(1,1,C.itemRD$))},dependencies:[Y.r,O.R,nt.s,H.H,ot.v,Q.I,R.A,D.v,_.h,_.D9,p.Jj,p.bT,pt,Mt],styles:["@media (max-width: 991.98px){.container[_ngcontent-%COMP%]{width:100%;max-width:none}}.document-viewer[_ngcontent-%COMP%]{height:600px;overflow:hidden}.document-viewer[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%]{border:none;width:100%;height:100%}.border-right[_ngcontent-%COMP%]{border-right:1px solid #dee2e6}.metadata-panel[_ngcontent-%COMP%]{height:600px;overflow-y:auto}.side-by-side-container[_ngcontent-%COMP%]{display:flex;height:100%}@media (max-width: 768px){.side-by-side-container[_ngcontent-%COMP%]{flex-direction:column}.document-viewer[_ngcontent-%COMP%], .metadata-panel[_ngcontent-%COMP%]{height:400px}}.pdf-container[_ngcontent-%COMP%]{width:100%;height:600px;overflow:auto;border:1px solid #ddd;border-radius:4px}.image-container[_ngcontent-%COMP%]{max-width:100%;text-align:center}.image-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;max-height:600px;border:1px solid #ddd;border-radius:4px}.download-link[_ngcontent-%COMP%]{text-align:center;padding:20px}"],data:{animation:[G.Ws]},changeDetection:0})}}return a})();var Ft=i(53996);const Vt=a=>[a];function xt(a,h){if(1&a&&(e.j41(0,"div",18)(1,"a",19),e.nI1(2,"async"),e.EFF(3),e.nI1(4,"translate"),e.k0s()()),2&a){const s=e.XpG(5);e.R7$(),e.Y8G("routerLink",e.eq3(6,Vt,e.bMT(2,2,s.itemPageRoute$))),e.R7$(2),e.SpI(" ",e.bMT(4,4,"item.page.link.simple")," ")}}function Bt(a,h){if(1&a&&(e.j41(0,"tr")(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s()()),2&a){const s=h.$implicit,d=e.XpG().$implicit;e.R7$(2),e.JRh(d.key),e.R7$(2),e.JRh(s.value),e.R7$(2),e.JRh(s.language)}}function At(a,h){if(1&a&&(e.qex(0),e.DNE(1,Bt,7,3,"tr",15),e.bVm()),2&a){const s=h.$implicit;e.R7$(),e.Y8G("ngForOf",s.value)}}function r(a,h){if(1&a){const s=e.RV6();e.j41(0,"div",20)(1,"div",21)(2,"button",22),e.bIt("click",function(){e.eBV(s);const C=e.XpG(5);return e.Njj(C.back())}),e.nrm(3,"i",23),e.EFF(4),e.nI1(5,"translate"),e.k0s()()()}2&a&&(e.R7$(4),e.SpI(" ",e.bMT(5,1,"item.page.return"),""))}function b(a,h){if(1&a&&(e.j41(0,"div",9)(1,"div",10),e.nrm(2,"ds-item-page-title-field",11)(3,"ds-dso-edit-menu"),e.k0s(),e.DNE(4,xt,5,8,"div",12),e.j41(5,"div",13)(6,"table",14)(7,"tbody"),e.DNE(8,At,2,1,"ng-container",15),e.nI1(9,"async"),e.nI1(10,"keyvalue"),e.k0s()()(),e.nrm(11,"ds-item-page-full-file-section",6)(12,"ds-item-page-collections",6)(13,"ds-item-versions",16),e.DNE(14,r,6,3,"div",17),e.k0s()),2&a){const s=e.XpG().ngIf,d=e.XpG(3);e.R7$(2),e.Y8G("item",s),e.R7$(2),e.Y8G("ngIf",!d.fromSubmissionObject),e.R7$(4),e.Y8G("ngForOf",e.bMT(10,9,e.bMT(9,7,d.metadata$))),e.R7$(3),e.Y8G("item",s),e.R7$(),e.Y8G("item",s),e.R7$(),e.Y8G("item",s),e.R7$(),e.Y8G("ngIf",d.fromSubmissionObject)}}function o(a,h){if(1&a&&(e.j41(0,"div"),e.nrm(1,"ds-item-alerts",6)(2,"ds-item-versions-notice",6)(3,"ds-view-tracker",7),e.DNE(4,b,15,11,"div",8),e.nI1(5,"async"),e.k0s()),2&a){const s=h.ngIf,d=e.XpG(3);e.R7$(),e.Y8G("item",s),e.R7$(),e.Y8G("item",s),e.R7$(),e.Y8G("object",s),e.R7$(),e.Y8G("ngIf",!s.isWithdrawn||e.bMT(5,4,d.isAdmin$))}}function m(a,h){if(1&a&&(e.j41(0,"div",4),e.DNE(1,o,6,6,"div",5),e.k0s()),2&a){const s=e.XpG().ngVar;e.Y8G("@fadeInOut",void 0),e.R7$(),e.Y8G("ngIf",null==s?null:s.payload)}}function l(a,h){1&a&&(e.nrm(0,"ds-error",24),e.nI1(1,"translate")),2&a&&e.FS9("message",e.bMT(1,1,"error.item"))}function g(a,h){1&a&&(e.nrm(0,"ds-loading",24),e.nI1(1,"translate")),2&a&&e.FS9("message",e.bMT(1,1,"loading.item"))}function $(a,h){if(1&a&&(e.j41(0,"div",1),e.DNE(1,m,2,2,"div",2)(2,l,2,3,"ds-error",3)(3,g,2,3,"ds-loading",3),e.k0s()),2&a){const s=h.ngVar;e.R7$(),e.Y8G("ngIf",null==s?null:s.hasSucceeded),e.R7$(),e.Y8G("ngIf",null==s?null:s.hasFailed),e.R7$(),e.Y8G("ngIf",null==s?null:s.isLoading)}}let K=(()=>{class a extends $t{constructor(s,d,C,B,N,tt,lt,ct,dt,Ut){super(s,d,C,B,tt,lt,ct,dt,Ut),this.route=s,this.router=d,this.items=C,this.authorizationService=B,this._location=N,this.responseService=tt,this.signpostingDataService=lt,this.linkHeadService=ct,this.notifyInfoService=dt,this.platformId=Ut,this.fromSubmissionObject=!1,this.subs=[]}ngOnInit(){super.ngOnInit(),this.metadata$=this.itemRD$.pipe((0,E.T)(s=>s.payload),(0,f.p)(s=>(0,c.a4)(s)),(0,E.T)(s=>s.metadata)),this.subs.push(this.route.data.subscribe(s=>{this.fromSubmissionObject=(0,c.a4)(s.wfi)||(0,c.a4)(s.wsi)}))}back(){this._location.back()}ngOnDestroy(){this.subs.filter(s=>(0,c.a4)(s)).forEach(s=>s.unsubscribe())}static{this.\u0275fac=function(d){return new(d||a)(e.rXU(u.nX),e.rXU(u.Ix),e.rXU(A.ItemDataService),e.rXU(T.AuthorizationDataService),e.rXU(p.aZ),e.rXU(y.w),e.rXU(I.z),e.rXU(rt.m),e.rXU(V.P),e.rXU(e.Agw))}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["ds-base-full-item-page"]],standalone:!0,features:[e.Vt3,e.aNF],decls:2,vars:3,consts:[["class","container",4,"ngVar"],[1,"container"],["class","item-page",4,"ngIf"],[3,"message",4,"ngIf"],[1,"item-page"],[4,"ngIf"],[3,"item"],[3,"object"],["class","full-item-info",4,"ngIf"],[1,"full-item-info"],[1,"d-flex","flex-row"],[1,"me-auto",3,"item"],["class","simple-view-link my-3",4,"ngIf"],[1,"table-responsive"],[1,"table","table-striped"],[4,"ngFor","ngForOf"],[1,"mt-2",3,"item"],["class","button-row bottom",4,"ngIf"],[1,"simple-view-link","my-3"],[1,"btn","btn-outline-primary",3,"routerLink"],[1,"button-row","bottom"],[1,"text-end"],[1,"btn","btn-outline-secondary","me-1",3,"click"],[1,"fas","fa-arrow-left"],[3,"message"]],template:function(d,C){1&d&&(e.DNE(0,$,4,3,"div",0),e.nI1(1,"async")),2&d&&e.Y8G("ngVar",e.bMT(1,1,C.itemRD$))},dependencies:[R.A,D.v,_.h,_.D9,Ft.n,k.r,Q.I,p.bT,p.Sq,p.Jj,p.lG,u.Wk,n.V,j.T,nt.s,H.H,O.R,Y.r],styles:["[_nghost-%COMP%]   div.simple-view-link[_ngcontent-%COMP%]{text-align:center}[_nghost-%COMP%]   div.simple-view-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{min-width:25%}"],data:{animation:[G.Ws]},changeDetection:0})}}return a})()},10870:(L,F,i)=>{"use strict";i.d(F,{i:()=>f});var p=i(8886),u=(i(69002),i(54438));const _=["*"];function E(V,T){}let f=(()=>{class V extends p.J{getComponentName(){return"FullItemPageComponent"}importThemedComponent(A){return i(4872)(`./${A}/app/item-page/full/full-item-page.component`)}importUnthemedComponent(){return Promise.resolve().then(i.bind(i,69002))}static{this.\u0275fac=(()=>{let A;return function(y){return(A||(A=u.xGo(V)))(y||V)}})()}static{this.\u0275cmp=u.VBU({type:V,selectors:[["ds-full-item-page"]],standalone:!0,features:[u.Vt3,u.aNF],ngContentSelectors:_,decls:5,vars:0,consts:[["vcr",""],["content",""]],template:function(I,y){1&I&&(u.NAR(),u.DNE(0,E,0,0,"ng-template",null,0,u.C5r),u.j41(2,"div",null,1),u.SdG(4),u.k0s())},encapsulation:2})}}return V})()},72976:(L,F,i)=>{"use strict";i.d(F,{I:()=>At});var p=i(60177),e=i(89417),u=i(41780),_=i(84572),E=i(25558),f=i(96354),V=i(99172),T=i(96697),A=i(8917),I=i(65007),y=i(3970),G=i(81783),j=i(93860),c=i(22978),D=(i(88318),i(80183)),Y=i(16292),H=i(47978),O=i(60456),k=i(82777),n=i(39806),P=i(5682),U=i(23401),et=i(33550),q=i(67600),t=i(54438),w=i(7901),z=i(7673),ot=i(70274),J=i(73028),Q=i(88141),nt=i(29326),W=(i(2035),i(52837)),v=i(24261),S=i(90887),x=i(58003);const X=r=>({version:r});let Z=(()=>{class r{constructor(o){this.activeModal=o,this.response=new t.bkB}onModalClose(){this.response.emit(!1),this.activeModal.dismiss()}onModalSubmit(){this.response.emit(!0),this.activeModal.close()}static{this.\u0275fac=function(m){return new(m||r)(t.rXU(x.Lw))}}static{this.\u0275cmp=t.VBU({type:r,selectors:[["ds-item-versions-delete-modal"]],outputs:{response:"response"},standalone:!0,features:[t.aNF],decls:20,vars:21,consts:[[1,"modal-header"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"pb-2"],[1,"modal-footer"],[1,"btn","btn-outline-secondary","btn-sm","cancel",3,"click","title"],[1,"fas","fa-times","fa-fw"],[1,"btn","btn-danger","btn-sm","confirm",3,"click","title"],[1,"fas","fa-check","fa-fw"]],template:function(m,l){1&m&&(t.j41(0,"div")(1,"div",0),t.EFF(2),t.nI1(3,"translate"),t.j41(4,"button",1),t.bIt("click",function(){return l.onModalClose()}),t.k0s()(),t.j41(5,"div",2)(6,"p",3),t.EFF(7),t.nI1(8,"translate"),t.k0s()(),t.j41(9,"div",4)(10,"button",5),t.nI1(11,"translate"),t.bIt("click",function(){return l.onModalClose()}),t.nrm(12,"i",6),t.EFF(13),t.nI1(14,"translate"),t.k0s(),t.j41(15,"button",7),t.nI1(16,"translate"),t.bIt("click",function(){return l.onModalSubmit()}),t.nrm(17,"i",8),t.EFF(18),t.nI1(19,"translate"),t.k0s()()()),2&m&&(t.R7$(2),t.SpI("",t.bMT(3,6,"item.version.delete.modal.header")," "),t.R7$(5),t.JRh(t.i5U(8,8,"item.version.delete.modal.text",t.eq3(19,X,l.versionNumber))),t.R7$(3),t.FS9("title",t.bMT(11,11,"item.version.delete.modal.button.cancel.tooltip")),t.R7$(3),t.SpI(" ",t.bMT(14,13,"item.version.delete.modal.button.cancel")," "),t.R7$(2),t.FS9("title",t.bMT(16,15,"item.version.delete.modal.button.confirm.tooltip")),t.R7$(3),t.SpI(" ",t.bMT(19,17,"item.version.delete.modal.button.confirm")," "))},dependencies:[u.h,u.D9]})}}return r})();var it=i(76604),st=i(13574);function mt(r,b){1&r&&t.nrm(0,"span")}function _t(r,b){if(1&r&&(t.j41(0,"a",9),t.EFF(1),t.k0s()),2&r){const o=t.XpG();t.Y8G("routerLink",o.getVersionRoute(o.version.id)),t.R7$(),t.JRh(o.version.version)}}function pt(r,b){if(1&r&&t.EFF(0),2&r){const o=t.XpG();t.SpI(" ",o.version.version," ")}}function vt(r,b){1&r&&(t.j41(0,"span"),t.EFF(1,"*"),t.k0s())}function ut(r,b){1&r&&(t.j41(0,"span",10),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&r&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"item.version.history.table.workspaceItem")," "))}function gt(r,b){1&r&&(t.j41(0,"span",11),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&r&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"item.version.history.table.workflowItem")," "))}function at(r,b){if(1&r){const o=t.RV6();t.j41(0,"button",14),t.nI1(1,"translate"),t.bIt("click",function(){t.eBV(o);const l=t.XpG(2);return t.Njj(l.editWorkspaceItem(l.workspaceId$))}),t.nrm(2,"i",15),t.k0s()}2&r&&t.FS9("title",t.bMT(1,1,"item.version.history.table.action.editWorkspaceItem"))}function Gt(r,b){if(1&r){const o=t.RV6();t.qex(0),t.j41(1,"button",16),t.nI1(2,"translate"),t.bIt("click",function(){t.eBV(o);const l=t.XpG(2);return t.Njj(l.createNewVersion(l.version))}),t.nrm(3,"i",17),t.k0s(),t.bVm()}if(2&r){const o=t.XpG(2);t.R7$(),t.FS9("title",t.bMT(2,2,o.createVersionTitle)),t.Y8G("dsBtnDisabled",o.isAnyBeingEdited()||o.hasDraftVersion)}}function ft(r,b){if(1&r){const o=t.RV6();t.qex(0),t.j41(1,"button",18),t.nI1(2,"translate"),t.bIt("click",function(){t.eBV(o);const l=t.XpG(2);return t.Njj(l.deleteVersion(l.version,l.version.id===l.itemVersion.id))}),t.nrm(3,"i",19),t.k0s(),t.bVm()}if(2&r){const o=t.XpG(2);t.R7$(),t.FS9("title",t.bMT(2,3,"item.version.history.table.action.deleteVersion")),t.Y8G("ngClass",o.isAnyBeingEdited()?"btn-outline-primary":"btn-outline-danger")("dsBtnDisabled",o.isAnyBeingEdited())}}function ht(r,b){if(1&r&&(t.j41(0,"div",12),t.DNE(1,at,3,3,"button",13),t.nI1(2,"async"),t.DNE(3,Gt,4,4,"ng-container",4),t.nI1(4,"async"),t.DNE(5,ft,4,5,"ng-container",4),t.nI1(6,"async"),t.k0s()),2&r){const o=t.XpG();t.R7$(),t.Y8G("ngIf",t.bMT(2,3,o.workspaceId$)),t.R7$(2),t.Y8G("ngIf",t.bMT(4,5,o.canCreateVersion$)),t.R7$(2),t.Y8G("ngIf",t.bMT(6,7,o.canDeleteVersion$))}}let It=(()=>{class r{constructor(o,m,l,g,$,K,a,h,s,d,C){this.workspaceItemDataService=o,this.workflowItemDataService=m,this.router=l,this.itemService=g,this.authorizationService=$,this.itemVersionShared=K,this.versionHistoryService=a,this.versionService=h,this.notificationsService=s,this.translateService=d,this.modalService=C,this.versionsHistoryChange=new t.bkB}ngOnInit(){this.workspaceId$=this.getWorkspaceId(this.version.item),this.workflowId$=this.getWorkflowId(this.version.item),this.canDeleteVersion$=this.canDeleteVersion(this.version),this.canCreateVersion$=this.authorizationService.isAuthorized(y._.CanCreateVersion,this.item.self),this.createVersionTitle=this.hasDraftVersion?"item.version.history.table.action.hasDraft":"item.version.history.table.action.newVersion"}getWorkspaceId(o){return this.hasDraftVersion?o.pipe((0,D.ak)(),(0,f.T)(m=>m.uuid),(0,E.n)(m=>this.workspaceItemDataService.findByItem(m,!0)),(0,D.qD)(),(0,f.T)(m=>m?.payload?.id)):(0,z.of)(void 0)}getWorkflowId(o){return this.getWorkspaceId(o).pipe((0,ot.H)(m=>m?(0,z.of)(void 0):o.pipe((0,D.ak)(),(0,f.T)(l=>l.uuid),(0,E.n)(l=>this.workflowItemDataService.findByItem(l,!0)),(0,D.qD)(),(0,f.T)(l=>l?.payload?.id))))}editWorkspaceItem(o){o.subscribe(m=>{this.router.navigateByUrl("workspaceitems/"+m+"/edit")})}canDeleteVersion(o){return this.authorizationService.isAuthorized(y._.CanDeleteVersion,o.self)}getVersionRoute(o){return(0,S.vf)(o)}createNewVersion(o){const m=o.version,l=this.modalService.open(st.L);l.componentInstance.versionNumber=m,l.componentInstance.createVersionEvent.pipe((0,J.Z)(g=>(0,_.z)([(0,z.of)(g),o.item.pipe((0,D.ak)())])),(0,J.Z)(([g,$])=>this.versionHistoryService.createVersion($._links.self.href,g)),(0,D.qD)(),(0,Q.M)(()=>l.close()),(0,Q.M)(g=>{if(this.itemVersionShared.notifyCreateNewVersion(g),g.hasSucceeded){const $=this.versionService.getHistoryFromVersion(o).pipe((0,Q.M)(K=>{this.itemService.invalidateItemCache(this.item.uuid),this.versionHistoryService.invalidateVersionHistoryCache(K.id)}));this.versionsHistoryChange.emit($)}}),(0,D.ak)(),(0,E.n)(g=>this.itemService.findByHref(g._links.item.href)),(0,D.ak)(),(0,E.n)(g=>this.workspaceItemDataService.findByItem(g.uuid,!0,!1)),(0,D.ak)()).subscribe(g=>{this.router.navigateByUrl("workspaceitems/"+g.id+"/edit")})}deleteVersion(o,m){const $=o.version,K=o.item,a=this.modalService.open(Z);a.componentInstance.versionNumber=o.version,a.componentInstance.firstVersion=!1,a.componentInstance.response.pipe((0,T.s)(1)).subscribe(h=>{h&&K.pipe((0,D.ak)(),(0,J.Z)(s=>(0,_.z)([(0,z.of)(s),this.versionHistoryService.getVersionHistoryFromVersion$(o)])),(0,J.Z)(([s,d])=>(0,_.z)([this.deleteItemAndGetResult$(s),(0,z.of)(d)])),(0,J.Z)(([s,d])=>(0,_.z)([(0,z.of)(s),this.versionHistoryService.getLatestVersionItemFromHistory$(d).pipe((0,Q.M)(()=>{this.versionsHistoryChange.emit((0,z.of)(d))}))]))).subscribe(([s,d])=>{if(s?this.notificationsService.success(null,this.translateService.get("item.version.delete.notification.success",{version:$})):this.notificationsService.error(null,this.translateService.get("item.version.delete.notification.failure",{version:$})),m){const C=(0,S.nF)(d);this.router.navigateByUrl(C)}})})}deleteItemAndGetResult$(o){return this.itemService.delete(o.id).pipe((0,D.qD)(),(0,f.T)(m=>m.hasSucceeded),(0,T.s)(1))}isAnyBeingEdited(){return null!=this.versionBeingEditedNumber}static{this.\u0275fac=function(m){return new(m||r)(t.rXU(v.WorkspaceitemDataService),t.rXU(W.WorkflowItemDataService),t.rXU(w.Ix),t.rXU(nt.ItemDataService),t.rXU(I.AuthorizationDataService),t.rXU(it.h),t.rXU(j.VersionHistoryDataService),t.rXU(G.VersionDataService),t.rXU(n.I),t.rXU(u.c$),t.rXU(x.Bq))}}static{this.\u0275cmp=t.VBU({type:r,selectors:[["ds-item-versions-row-element-version"]],inputs:{hasDraftVersion:"hasDraftVersion",version:"version",itemVersion:"itemVersion",item:"item",displayActions:"displayActions",versionBeingEditedNumber:"versionBeingEditedNumber"},outputs:{versionsHistoryChange:"versionsHistoryChange"},standalone:!0,features:[t.aNF],decls:15,vars:15,consts:[["versionNumberWithLink",""],["versionNumberWithoutLink",""],[1,"left-column"],[4,"ngIf","ngIfThen","ngIfElse"],[4,"ngIf"],["class","text-light badge bg-primary ms-3",4,"ngIf"],["class","text-light badge bg-info ms-3",4,"ngIf"],[1,"right-column"],["class","btn-group edit-field space-children-mr",4,"ngIf"],[3,"routerLink"],[1,"text-light","badge","bg-primary","ms-3"],[1,"text-light","badge","bg-info","ms-3"],[1,"btn-group","edit-field","space-children-mr"],["class","btn btn-outline-primary btn-sm version-row-element-edit",3,"title","click",4,"ngIf"],[1,"btn","btn-outline-primary","btn-sm","version-row-element-edit",3,"click","title"],[1,"fas","fa-pencil-alt","fa-fw"],[1,"btn","btn-outline-primary","btn-sm","version-row-element-create",3,"click","dsBtnDisabled","title"],[1,"fas","fa-code-branch","fa-fw"],[1,"btn","btn-sm","version-row-element-delete",3,"click","ngClass","dsBtnDisabled","title"],[1,"fas","fa-trash","fa-fw"]],template:function(m,l){if(1&m&&(t.j41(0,"div",2),t.DNE(1,mt,1,0,"span",3),t.nI1(2,"async"),t.nI1(3,"async"),t.DNE(4,_t,2,2,"ng-template",null,0,t.C5r)(6,pt,1,1,"ng-template",null,1,t.C5r)(8,vt,2,0,"span",4)(9,ut,3,3,"span",5),t.nI1(10,"async"),t.DNE(11,gt,3,3,"span",6),t.nI1(12,"async"),t.k0s(),t.j41(13,"div",7),t.DNE(14,ht,7,9,"div",8),t.k0s()),2&m){const g=t.sdS(5),$=t.sdS(7);t.R7$(),t.Y8G("ngIf",t.bMT(2,7,l.workspaceId$)||t.bMT(3,9,l.workflowId$))("ngIfThen",$)("ngIfElse",g),t.R7$(7),t.Y8G("ngIf",(null==l.version?null:l.version.id)===(null==l.itemVersion?null:l.itemVersion.id)),t.R7$(),t.Y8G("ngIf",t.bMT(10,11,l.workspaceId$)),t.R7$(2),t.Y8G("ngIf",t.bMT(12,13,l.workflowId$)),t.R7$(3),t.Y8G("ngIf",l.displayActions)}},dependencies:[p.Jj,w.Wk,u.h,u.D9,p.YU,p.bT,O.A],styles:[".left-column[_ngcontent-%COMP%]{float:left;text-align:left}.right-column[_ngcontent-%COMP%]{float:right;text-align:right}"]})}}return r})();const Et=r=>({version:r});function yt(r,b){1&r&&(t.j41(0,"h2",11),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&r&&(t.R7$(),t.JRh(t.bMT(2,1,"item.version.history.head")))}function Tt(r,b){1&r&&(t.j41(0,"th",14),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&r&&(t.R7$(),t.JRh(t.bMT(2,1,"item.version.history.table.editor")))}function Dt(r,b){if(1&r&&(t.j41(0,"td",26),t.EFF(1),t.k0s()),2&r){const o=t.XpG().$implicit;t.R7$(),t.SpI(" ",o.version.submitterName," ")}}function Mt(r,b){1&r&&t.eu8(0)}function rt(r,b){if(1&r&&t.EFF(0),2&r){const o=t.XpG().$implicit;t.JRh(o.version.summary)}}function Rt(r,b){if(1&r){const o=t.RV6();t.j41(0,"input",27),t.nI1(1,"translate"),t.mxI("ngModelChange",function(l){t.eBV(o);const g=t.XpG(6);return t.DH7(g.versionBeingEditedSummary,l)||(g.versionBeingEditedSummary=l),t.Njj(l)}),t.bIt("keyup.enter",function(){t.eBV(o);const l=t.XpG(6);return t.Njj(l.onSummarySubmit())}),t.k0s()}if(2&r){const o=t.XpG(6);t.R50("ngModel",o.versionBeingEditedSummary),t.BMQ("aria-label",t.bMT(1,2,"item.version.history.table.action.editSummary"))}}function Ct(r,b){if(1&r){const o=t.RV6();t.qex(0),t.j41(1,"button",29),t.nI1(2,"translate"),t.bIt("click",function(){t.eBV(o);const l=t.XpG(7);return t.Njj(l.disableVersionEditing())}),t.nrm(3,"i",30),t.k0s(),t.j41(4,"button",31),t.nI1(5,"translate"),t.bIt("click",function(){t.eBV(o);const l=t.XpG(7);return t.Njj(l.onSummarySubmit())}),t.nrm(6,"i",32),t.k0s(),t.bVm()}2&r&&(t.R7$(),t.FS9("title",t.bMT(2,2,"item.version.history.table.action.discardSummary")),t.R7$(3),t.FS9("title",t.bMT(5,4,"item.version.history.table.action.saveSummary")))}function Ot(r,b){if(1&r){const o=t.RV6();t.j41(0,"button",33),t.nI1(1,"translate"),t.bIt("click",function(){t.eBV(o);const l=t.XpG(2).$implicit,g=t.XpG(5);return t.Njj(g.enableVersionEditing(l.version))}),t.nrm(2,"i",34),t.k0s()}if(2&r){const o=t.XpG(7);t.FS9("title",t.bMT(1,2,"item.version.history.table.action.editSummary")),t.Y8G("dsBtnDisabled",o.isAnyBeingEdited())}}function St(r,b){if(1&r&&(t.j41(0,"div",28),t.DNE(1,Ct,7,6,"ng-container",4)(2,Ot,3,4,"ng-template",null,3,t.C5r),t.k0s()),2&r){const o=t.sdS(3),m=t.XpG().$implicit,l=t.XpG(5);t.R7$(),t.Y8G("ngIf",l.isThisBeingEdited(m.version))("ngIfElse",o)}}function bt(r,b){if(1&r){const o=t.RV6();t.j41(0,"tr",17)(1,"td",18)(2,"ds-item-versions-row-element-version",19),t.nI1(3,"async"),t.bIt("versionsHistoryChange",function(l){t.eBV(o);const g=t.XpG(5);return t.Njj(g.getAllVersions(l))}),t.k0s()(),t.DNE(4,Dt,2,1,"td",20),t.nI1(5,"async"),t.j41(6,"td",21),t.EFF(7),t.nI1(8,"date"),t.k0s(),t.j41(9,"td",22)(10,"div",23),t.DNE(11,Mt,1,0,"ng-container",24)(12,rt,1,1,"ng-template",null,1,t.C5r)(14,Rt,2,4,"ng-template",null,2,t.C5r),t.k0s(),t.DNE(16,St,4,2,"div",25),t.nI1(17,"async"),t.k0s()()}if(2&r){const o=b.$implicit,m=t.sdS(13),l=t.sdS(15),g=t.XpG(3).ngIf,$=t.XpG(2);t.Y8G("id","version-row-"+o.version.id),t.R7$(2),t.Y8G("hasDraftVersion",t.bMT(3,13,$.hasDraftVersion$))("version",o.version)("item",$.item)("displayActions",$.displayActions)("itemVersion",g)("versionBeingEditedNumber",$.versionBeingEditedNumber),t.R7$(2),t.Y8G("ngIf",t.bMT(5,15,$.showSubmitter$)),t.R7$(3),t.SpI(" ",t.i5U(8,17,o.version.created,"yyyy-MM-dd HH:mm:ss")," "),t.R7$(4),t.Y8G("ngIf",$.isThisBeingEdited(o.version))("ngIfThen",l)("ngIfElse",m),t.R7$(5),t.Y8G("ngIf",t.bMT(17,20,$.displayActions&&o.canEditVersion))}}function Pt(r,b){if(1&r){const o=t.RV6();t.j41(0,"ds-pagination",12),t.bIt("paginationChange",function(){t.eBV(o);const l=t.XpG(4);return t.Njj(l.onPageChange())}),t.j41(1,"table",13)(2,"thead")(3,"tr")(4,"th",14),t.EFF(5),t.nI1(6,"translate"),t.k0s(),t.DNE(7,Tt,3,3,"th",15),t.nI1(8,"async"),t.j41(9,"th",14),t.EFF(10),t.nI1(11,"translate"),t.k0s(),t.j41(12,"th",14),t.EFF(13),t.nI1(14,"translate"),t.k0s()()(),t.j41(15,"tbody"),t.DNE(16,bt,18,22,"tr",16),t.k0s()(),t.j41(17,"div"),t.EFF(18),t.nI1(19,"translate"),t.k0s()()}if(2&r){const o=t.XpG(3).ngIf,m=t.XpG();t.Y8G("hideGear",!0)("hidePagerWhenSinglePage",!0)("paginationOptions",m.options)("collectionSize",o.totalElements)("retainScrollPosition",!0),t.R7$(5),t.JRh(t.bMT(6,11,"item.version.history.table.version")),t.R7$(2),t.Y8G("ngIf",t.bMT(8,13,m.showSubmitter$)),t.R7$(3),t.JRh(t.bMT(11,15,"item.version.history.table.date")),t.R7$(3),t.JRh(t.bMT(14,17,"item.version.history.table.summary")),t.R7$(3),t.Y8G("ngForOf",o.versionDTOs),t.R7$(2),t.SpI("*\xa0",t.bMT(19,19,"item.version.history.selected"),"")}}function $t(r,b){if(1&r&&(t.j41(0,"div",7),t.DNE(1,yt,3,3,"h2",8),t.j41(2,"ds-alert",9),t.EFF(3),t.nI1(4,"translate"),t.k0s(),t.DNE(5,Pt,20,21,"ds-pagination",10),t.k0s()),2&r){const o=t.XpG().ngIf,m=t.XpG().ngIf,l=t.XpG();t.R7$(),t.Y8G("ngIf",l.displayTitle),t.R7$(),t.Y8G("type",l.AlertTypeEnum.Info),t.R7$(),t.SpI(" ",t.i5U(4,4,"item.version.history.selected.alert",t.eq3(7,Et,o.version))," "),t.R7$(2),t.Y8G("ngIf",m.versionDTOs.length>0)}}function Ft(r,b){if(1&r&&(t.j41(0,"div"),t.DNE(1,$t,6,9,"div",6),t.k0s()),2&r){const o=t.XpG().ngIf,m=t.XpG();t.R7$(),t.Y8G("ngIf",o.versionDTOs.length>0||m.displayWhenEmpty)}}function Vt(r,b){if(1&r&&(t.j41(0,"div"),t.DNE(1,Ft,2,1,"div",5),t.nI1(2,"async"),t.k0s()),2&r){let o;const m=t.XpG();t.R7$(),t.Y8G("ngIf",null==(o=t.bMT(2,1,m.versionRD$))?null:o.payload)}}function xt(r,b){if(1&r&&t.nrm(0,"ds-alert",36),2&r){const o=t.XpG(2);t.Y8G("content","item.version.history.empty")("type",o.AlertTypeEnum.Info)}}function Bt(r,b){if(1&r&&t.DNE(0,xt,1,2,"ds-alert",35),2&r){const o=t.XpG();t.Y8G("ngIf",o.displayWhenEmpty)}}let At=(()=>{class r{constructor(o,m,l,g,$,K,a){this.versionHistoryService=o,this.versionService=m,this.paginationService=l,this.notificationsService=g,this.translateService=$,this.authorizationService=K,this.configurationService=a,this.displayWhenEmpty=!1,this.displayTitle=!0,this.subs=[],this.AlertTypeEnum=H.v,this.showSubmitter$=this.showSubmitter(),this.pageSize=10,this.options=Object.assign(new U.W,{id:"ivo",currentPage:1,pageSize:this.pageSize})}isAnyBeingEdited(){return null!=this.versionBeingEditedNumber}isThisBeingEdited(o){return o?.version===this.versionBeingEditedNumber}enableVersionEditing(o){this.versionBeingEditedSummary=o?.summary,this.versionBeingEditedNumber=o?.version,this.versionBeingEditedId=o?.id}disableVersionEditing(){this.versionBeingEditedSummary=void 0,this.versionBeingEditedNumber=void 0,this.versionBeingEditedId=void 0}onSummarySubmit(){this.versionService.findById(this.versionBeingEditedId).pipe((0,D.yd)(),(0,E.n)(l=>{const K=Object.assign({},l.payload,{summary:this.versionBeingEditedSummary});return this.versionService.update(K).pipe((0,D.qD)())})).subscribe(l=>{l.hasSucceeded?(this.notificationsService.success(null,this.translateService.get("item.version.edit.notification.success",{version:this.versionBeingEditedNumber})),this.getAllVersions(this.versionHistory$)):this.notificationsService.warning(null,this.translateService.get("item.version.edit.notification.failure",{version:this.versionBeingEditedNumber})),this.disableVersionEditing()})}canEditVersion$(o){return this.authorizationService.isAuthorized(y._.CanEditVersion,o.self)}showSubmitter(){const o=this.configurationService.findByPropertyName("versioning.item.history.include.submitter").pipe((0,D.ak)(),(0,f.T)(l=>l.values[0]),(0,V.Z)(!1)),m=(0,_.z)([this.authorizationService.isAuthorized(y._.IsCollectionAdmin),this.authorizationService.isAuthorized(y._.IsCommunityAdmin),this.authorizationService.isAuthorized(y._.AdministratorOf)]).pipe((0,f.T)(([l,g,$])=>l||g||$),(0,T.s)(1));return(0,_.z)([o,m]).pipe((0,f.T)(([l,g])=>l&&g))}getAllVersions(o){const m=this.paginationService.getCurrentPagination(this.options.id,this.options);this.versionsDTO$=(0,_.z)([o,m]).pipe((0,E.n)(([l,g])=>this.versionHistoryService.getVersions(l.id,new et.C({pagination:Object.assign({},g,{currentPage:g.currentPage})}),!1,!0,(0,q.s)("item"),(0,q.s)("eperson"))),(0,D.qD)(),(0,D.Bo)(),(0,f.T)(l=>({totalElements:l.totalElements,versionDTOs:(l?.page??[]).map(g=>({version:g,canEditVersion:this.canEditVersion$(g)}))})))}onPageChange(){this.getAllVersions(this.versionHistory$)}ngOnInit(){(0,k.a4)(this.item.version)&&(this.versionRD$=this.item.version,this.versionHistoryRD$=this.versionRD$.pipe((0,D.v7)(),(0,D.Bo)(),(0,k.Az)(),(0,E.n)(o=>o.versionhistory)),this.versionHistory$=this.versionHistoryRD$.pipe((0,D.ak)(),(0,k.Az)()),this.hasDraftVersion$=this.versionHistoryRD$.pipe((0,D.ak)(),(0,f.T)(o=>!!o?.draftVersion)),this.getAllVersions(this.versionHistory$))}ngOnDestroy(){this.cleanupSubscribes(),this.paginationService.clearPagination(this.options.id)}cleanupSubscribes(){this.subs.filter(o=>(0,k.a4)(o)).forEach(o=>o.unsubscribe())}static{this.\u0275fac=function(m){return new(m||r)(t.rXU(j.VersionHistoryDataService),t.rXU(G.VersionDataService),t.rXU(c.m),t.rXU(n.I),t.rXU(u.c$),t.rXU(I.AuthorizationDataService),t.rXU(A.ConfigurationDataService))}}static{this.\u0275cmp=t.VBU({type:r,selectors:[["ds-item-versions"]],inputs:{item:"item",displayWhenEmpty:"displayWhenEmpty",displayTitle:"displayTitle",displayActions:"displayActions"},standalone:!0,features:[t.aNF],decls:4,vars:4,consts:[["noItemVersion",""],["showSummary",""],["editSummary",""],["notThisBeingEdited",""],[4,"ngIf","ngIfElse"],[4,"ngIf"],["class","mb-2",4,"ngIf"],[1,"mb-2"],["class","h4",4,"ngIf"],[3,"type"],[3,"hideGear","hidePagerWhenSinglePage","paginationOptions","collectionSize","retainScrollPosition","paginationChange",4,"ngIf"],[1,"h4"],[3,"paginationChange","hideGear","hidePagerWhenSinglePage","paginationOptions","collectionSize","retainScrollPosition"],[1,"table","table-striped","table-bordered","align-middle","my-2"],["scope","col"],["scope","col",4,"ngIf"],[3,"id",4,"ngFor","ngForOf"],[3,"id"],[1,"version-row-element-version"],[3,"versionsHistoryChange","hasDraftVersion","version","item","displayActions","itemVersion","versionBeingEditedNumber"],["class","version-row-element-editor",4,"ngIf"],[1,"version-row-element-date"],[1,"version-row-element-summary"],[1,"float-start"],[4,"ngIf","ngIfThen","ngIfElse"],["class","float-end btn-group edit-field space-children-mr",4,"ngIf"],[1,"version-row-element-editor"],["type","text",1,"form-control",3,"ngModelChange","keyup.enter","ngModel"],[1,"float-end","btn-group","edit-field","space-children-mr"],[1,"btn","btn-sm","btn-outline-warning",3,"click","title"],[1,"fas","fa-undo-alt","fa-fw"],[1,"btn","btn-outline-success","btn-sm",3,"click","title"],[1,"fas","fa-check","fa-fw"],[1,"btn","btn-outline-primary","btn-sm","version-row-element-edit",3,"click","dsBtnDisabled","title"],[1,"fas","fa-edit","fa-fw"],[3,"content","type",4,"ngIf"],[3,"content","type"]],template:function(m,l){if(1&m&&(t.DNE(0,Vt,3,3,"div",4),t.nI1(1,"async"),t.DNE(2,Bt,1,1,"ng-template",null,0,t.C5r)),2&m){const g=t.sdS(3);t.Y8G("ngIf",t.bMT(1,2,l.versionsDTO$))("ngIfElse",g)}},dependencies:[Y.C,p.Jj,p.vh,e.YN,e.me,e.BC,e.vS,It,p.pM,p.bT,P.e,u.h,u.D9,O.A]})}}return r})()},80502:(L,F,i)=>{"use strict";i.d(F,{s:()=>H});var p=i(60177),e=i(41780),u=i(983),_=i(7673),E=i(25558),f=i(96354),V=i(99172),T=i(93860),I=(i(88318),i(80183)),y=i(16292),G=i(47978),j=i(82777),c=i(90887),R=i(54438);const D=O=>({destination:O});function Y(O,k){if(1&O&&(R.nrm(0,"ds-alert",1),R.nI1(1,"async"),R.nI1(2,"async"),R.nI1(3,"translate")),2&O){let n;const P=R.XpG();R.Y8G("content",R.i5U(3,7,"item.version.notice",R.eq3(10,D,P.getItemPage(null==(n=R.bMT(2,5,null==(n=R.bMT(1,3,P.latestVersion$))?null:n.item))?null:n.payload))))("dismissible",!1)("type",P.AlertTypeEnum.Warning)}}let H=(()=>{class O{constructor(n){this.versionHistoryService=n,this.AlertTypeEnum=G.v}ngOnInit(){(0,j.a4)(this.item.version)&&(this.versionRD$=this.item.version,this.versionHistoryRD$=this.versionRD$.pipe((0,I.v7)(),(0,I.Bo)(),(0,j.Az)(),(0,E.n)(n=>n.versionhistory)),this.latestVersion$=this.versionHistoryRD$.pipe((0,I.qD)(),(0,E.n)(n=>n.hasSucceeded?this.versionHistoryService.getLatestVersionFromHistory$(n.payload):u.w)),this.showLatestVersionNotice$=this.versionRD$.pipe((0,I.qD)(),(0,E.n)(n=>n.hasSucceeded?this.versionHistoryService.isLatest$(n.payload).pipe((0,f.T)(P=>null!=P&&!P)):(0,_.of)(!1)),(0,V.Z)(!1)))}getItemPage(n){if((0,j.a4)(n))return(0,c._o)(n)}static{this.\u0275fac=function(P){return new(P||O)(R.rXU(T.VersionHistoryDataService))}}static{this.\u0275cmp=R.VBU({type:O,selectors:[["ds-item-versions-notice"]],inputs:{item:"item"},standalone:!0,features:[R.aNF],decls:2,vars:3,consts:[[3,"content","dismissible","type",4,"ngIf"],[3,"content","dismissible","type"]],template:function(P,U){1&P&&(R.DNE(0,Y,4,12,"ds-alert",0),R.nI1(1,"async")),2&P&&R.Y8G("ngIf",!0===R.bMT(1,1,U.showLatestVersionNotice$))},dependencies:[p.bT,y.C,p.Jj,e.h,e.D9],encapsulation:2})}}return O})()},42176:(L,F,i)=>{var p={"./custom/app/item-page/alerts/item-alerts.component":[5215,5215]};function e(u){if(!i.o(p,u))return Promise.resolve().then(()=>{var f=new Error("Cannot find module '"+u+"'");throw f.code="MODULE_NOT_FOUND",f});var _=p[u],E=_[0];return i.e(_[1]).then(()=>i(E))}e.keys=()=>Object.keys(p),e.id=42176,L.exports=e},63614:(L,F,i)=>{var p={"./custom/app/item-page/full/field-components/file-section/full-file-section.component":[42991,2991]};function e(u){if(!i.o(p,u))return Promise.resolve().then(()=>{var f=new Error("Cannot find module '"+u+"'");throw f.code="MODULE_NOT_FOUND",f});var _=p[u],E=_[0];return i.e(_[1]).then(()=>i(E))}e.keys=()=>Object.keys(p),e.id=63614,L.exports=e},4872:(L,F,i)=>{var p={"./custom/app/item-page/full/full-item-page.component":[39325,9325]};function e(u){if(!i.o(p,u))return Promise.resolve().then(()=>{var f=new Error("Cannot find module '"+u+"'");throw f.code="MODULE_NOT_FOUND",f});var _=p[u],E=_[0];return i.e(_[1]).then(()=>i(E))}e.keys=()=>Object.keys(p),e.id=4872,L.exports=e}}]);