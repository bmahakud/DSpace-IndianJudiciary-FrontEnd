"use strict";exports.id=8016,exports.ids=[8016],exports.modules={98016:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{AdminAuditModule:()=>AdminAuditModule});var common=__webpack_require__(87514),router=__webpack_require__(18134),http=__webpack_require__(98465),api_urls=__webpack_require__(77140),core=__webpack_require__(11201);let AdminAuditService=(()=>{class AdminAuditService2{constructor(http2){this.http=http2,this.private="/api/audit"}getAllUsers(){return this.http.get(`${api_urls.$}/server/api/audit/users`)}getAuditLogsByUser(userId){const params=(new http.Nl).set("userId",userId);return this.http.get(`${api_urls.$}/server/api/audit/user`,{params})}static{this.\u0275fac=function(t){return new(t||AdminAuditService2)(core.KVO(http.Qq))}}static{this.\u0275prov=core.jDH({token:AdminAuditService2,factory:AdminAuditService2.\u0275fac,providedIn:"root"})}}return AdminAuditService2})();function AuditUserListComponent_tr_15_Template(rf,ctx){if(1&rf){const _r1=core.RV6();core.j41(0,"tr",2),core.bIt("click",function(){const user_r2=core.eBV(_r1).$implicit,ctx_r2=core.XpG();return core.Njj(ctx_r2.goToDetails(user_r2.userId))}),core.j41(1,"td")(2,"a"),core.EFF(3),core.k0s()(),core.j41(4,"td"),core.EFF(5),core.nI1(6,"date"),core.k0s(),core.j41(7,"td"),core.EFF(8),core.nI1(9,"date"),core.k0s(),core.j41(10,"td"),core.EFF(11),core.k0s()()}if(2&rf){const user_r2=ctx.$implicit;core.R7$(3),core.JRh(user_r2.email),core.R7$(2),core.JRh(core.i5U(6,4,user_r2.loginTime,"short")),core.R7$(3),core.JRh(core.i5U(9,7,user_r2.logoutTime,"short")),core.R7$(3),core.JRh(user_r2.duration)}}function AuditUserDetailsComponent_li_6_Template(rf,ctx){if(1&rf&&(core.j41(0,"li"),core.EFF(1),core.k0s()),2&rf){const device_r1=ctx.$implicit;core.R7$(),core.JRh(device_r1)}}function AuditUserDetailsComponent_tr_23_Template(rf,ctx){if(1&rf&&(core.j41(0,"tr")(1,"td"),core.EFF(2),core.k0s(),core.j41(3,"td"),core.EFF(4),core.nI1(5,"date"),core.k0s(),core.j41(6,"td"),core.EFF(7),core.k0s(),core.j41(8,"td"),core.EFF(9),core.k0s(),core.j41(10,"td"),core.EFF(11),core.k0s()()),2&rf){const log_r2=ctx.$implicit;core.R7$(2),core.JRh(log_r2.action),core.R7$(2),core.JRh(core.i5U(5,5,log_r2.timestamp,"short")),core.R7$(3),core.JRh(log_r2.objectId||"-"),core.R7$(2),core.JRh(log_r2.ipAddress||"-"),core.R7$(2),core.JRh(log_r2.userAgent||"-")}}const routes=[{path:"",component:(()=>{class AuditUserListComponent2{constructor(router2,auditService){this.router=router2,this.auditService=auditService,this.users=[]}ngOnInit(){this.auditService.getAllUsers().subscribe({next:response=>{this.users=response||[]},error:err=>{console.error("Error fetching users:",err)}})}goToDetails(userId){this.router.navigate(["/user-audit/user",userId])}static{this.\u0275fac=function(t){return new(t||AuditUserListComponent2)(core.rXU(router.Ix),core.rXU(AdminAuditService))}}static{this.\u0275cmp=core.VBU({type:AuditUserListComponent2,selectors:[["app-audit-user-list"]],decls:16,vars:1,consts:[[1,"user-list-container"],[3,"click",4,"ngFor","ngForOf"],[3,"click"]],template:function(rf,ctx){1&rf&&(core.j41(0,"div",0)(1,"h2"),core.EFF(2,"User Audit Log Summary"),core.k0s(),core.j41(3,"table")(4,"thead")(5,"tr")(6,"th"),core.EFF(7,"Email"),core.k0s(),core.j41(8,"th"),core.EFF(9,"Last Login"),core.k0s(),core.j41(10,"th"),core.EFF(11,"Last Logout"),core.k0s(),core.j41(12,"th"),core.EFF(13,"Duration"),core.k0s()()(),core.j41(14,"tbody"),core.DNE(15,AuditUserListComponent_tr_15_Template,12,10,"tr",1),core.k0s()()()),2&rf&&(core.R7$(15),core.Y8G("ngForOf",ctx.users))},dependencies:[common.Sq,common.vh],styles:[".user-list-container[_ngcontent-%COMP%]{padding:24px}.user-list-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;cursor:pointer}.user-list-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .user-list-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px;border:1px solid #ccc;text-align:left}.user-list-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#f1f1f1}.user-list-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:underline;color:#007bff}"]})}}return AuditUserListComponent2})()},{path:"user/:userId",component:(()=>{class AuditUserDetailsComponent2{constructor(route,auditService){this.route=route,this.auditService=auditService,this.userId="",this.userLogs=[],this.uniqueDevices=[]}ngOnInit(){const paramId=this.route.snapshot.paramMap.get("userId");paramId?(this.userId=paramId,this.fetchUserLogs(this.userId)):console.error("User ID param is missing")}fetchUserLogs(userId){this.auditService.getAuditLogsByUser(userId).subscribe({next:logs=>{this.userLogs=logs,this.uniqueDevices=[...new Set(logs.map(log=>log.userAgent))]},error:err=>{console.error("Error fetching audit logs:",err)}})}static{this.\u0275fac=function(t){return new(t||AuditUserDetailsComponent2)(core.rXU(router.nX),core.rXU(AdminAuditService))}}static{this.\u0275cmp=core.VBU({type:AuditUserDetailsComponent2,selectors:[["app-audit-user-details"]],decls:24,vars:2,consts:[[1,"user-details-container"],[1,"summary-box"],[4,"ngFor","ngForOf"]],template:function(rf,ctx){1&rf&&(core.j41(0,"div",0)(1,"div",1)(2,"p")(3,"strong"),core.EFF(4,"Devices Used:"),core.k0s()(),core.j41(5,"ul"),core.DNE(6,AuditUserDetailsComponent_li_6_Template,2,1,"li",2),core.k0s()(),core.j41(7,"h3"),core.EFF(8,"Action Timeline"),core.k0s(),core.j41(9,"table")(10,"thead")(11,"tr")(12,"th"),core.EFF(13,"Action"),core.k0s(),core.j41(14,"th"),core.EFF(15,"Timestamp"),core.k0s(),core.j41(16,"th"),core.EFF(17,"Object"),core.k0s(),core.j41(18,"th"),core.EFF(19,"IP"),core.k0s(),core.j41(20,"th"),core.EFF(21,"Device"),core.k0s()()(),core.j41(22,"tbody"),core.DNE(23,AuditUserDetailsComponent_tr_23_Template,12,8,"tr",2),core.k0s()()()),2&rf&&(core.R7$(6),core.Y8G("ngForOf",ctx.uniqueDevices),core.R7$(17),core.Y8G("ngForOf",ctx.userLogs))},dependencies:[common.Sq,common.vh],styles:[".user-details-container[_ngcontent-%COMP%]{padding:24px}.user-details-container[_ngcontent-%COMP%]   .summary-box[_ngcontent-%COMP%]{background:#f9f9f9;padding:12px;margin-bottom:20px;border-radius:4px}.user-details-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.user-details-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .user-details-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px;border:1px solid #ccc}.user-details-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#f5f5f5}"]})}}return AuditUserDetailsComponent2})()}];let AdminAuditRoutingModule=(()=>{class AdminAuditRoutingModule2{static{this.\u0275fac=function(t){return new(t||AdminAuditRoutingModule2)}}static{this.\u0275mod=core.$C({type:AdminAuditRoutingModule2})}static{this.\u0275inj=core.G2t({imports:[router.iI.forChild(routes),router.iI]})}}return AdminAuditRoutingModule2})();var fesm2022_forms=__webpack_require__(13054);let AdminAuditModule=(()=>{class AdminAuditModule2{static{this.\u0275fac=function(t){return new(t||AdminAuditModule2)}}static{this.\u0275mod=core.$C({type:AdminAuditModule2})}static{this.\u0275inj=core.G2t({imports:[common.MD,fesm2022_forms.YN,AdminAuditRoutingModule]})}}return AdminAuditModule2})()}};